# Бэкенд для веб-сайта/мобильного приложения обмена валют

## Техническое задание

### Разработать бэкенд приложения обмена валют на Django/DjangoRestFramework. Реализовать следующий функционал:

#### 1. Создать таблицу Currency с 4 основными валютами: RUR, EUR, USD, CNY. В таблице должны быть следующие столбцы: краткое название валюты, полное название валюты, код валюты, символ валюты. Создать миграцию с данными по 4 основным валютам для автоматического заполнения таблицы при развертывании проекта.
#### 2. Регистрация пользователя. При регистрации пользователя автоматически создавать 4 счета в валютах RUR, EUR, USD, CNY посредством Django Signals.
#### 3. Аутентификация пользователя по почте и паролю c присвоением токена авторизации.
#### 4. Личный кабинет пользователя со следующими возможностями:

4.1 отображение и редактирование личных данных пользователя

4.2 отображение всех счетов пользователя с указанием балансов и валют

4.3 отображение актуальных курсов валют

4.4 перевод средств (на свой счет или счет другого пользователя системы). В случае отправки средств другому пользователю - отправлять смс уведомление(если у получателя включена данная опция) в фоновом режиме  посредства Celery. В качестве брокера сообщений использовать RabbitMQ

4.5 отображение списка операций по счетам с возможностью фильтрации и сортировки. 
Осуществить фильтрацию по следующим полям:
- Валюта
- Тип транзакции(списание/зачисление)
- Сумма транзакции
- Диапазон сумм для транзакции
- Дата создания транзакции
- Диапазон дат транзакций

Осуществить возможность сортировки по дате создания транзакции, по сумме транзакции

4.6 Реализовать постраничную пагинацию списка операций.

4.7 Логаут из личного кабинет

#### 5. Личный кабинет Администратора со следующими возможностями:
5.1 Вывод списка счетов всех пользователей с возможностью фильтрации и сортировки.  
Осуществить фильтрацию по следующим полям:
* Валюта счета (мультиселект)
* Баланс
* Диапазон сумм на балансе
* Номер счета
* Email пользователя(используется в качестве username)

Осуществить возможность сортировки по дате создания счета, балансу счета

5.2 Постраничная пагинация списка счетов.

5.3 Вывод списка всех транзакций всех пользователей с возможностью фильтрации и сортировки. 
Фильтрация осуществляется по следующим полям:
* Валюта операции (мультиселект)
* Тип транзакции
* Сумма транзакции
* Диапазон сумм для транзакции
* Дата создания транзакции
* Диапазон дат транзакций
* Счет отправителя
* Счет получателя

Сортировка осуществляется по датe создания транзакции и сумме транзакции.

5.4 Постраничная пагинация списка транзакций.

5.5 Пополнение баланса конкретного счета

#### 6. Реализовать автоматическое развертывание приложения посредством Docker-Compose.
#### 7. Для снижения нагрузки на основную базу использовать хранилище Redis для хранения и получения курсов валют.
#### 8. Ежедневно обновлять курсы валют посредством Celery Cron. Для получения актуальных курсов валют использовать API внешнего сервиса.
#### 9. Осуществить логгирование ошибок посредством Sentry.
#### 10. В качестве СУБД используется PostgreSQL.
#### 11. Использовать Swagger для автодокументирования API.

